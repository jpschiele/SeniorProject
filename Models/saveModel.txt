import firebase_admin
from firebase_admin import credentials
from firebase_admin import firestore
import pickle

# Replace with your own Firestore project credentials file path
cred = credentials.Certificate('path/to/your/credentials.json')
firebase_admin.initialize_app(cred)

# Replace with your own Firestore collection name and document ID
collection_name = 'models'
document_id = 'my_model'

# Load your pickled Python model (replace with your own model file path)
with open('path/to/your/model.pkl', 'rb') as f:
    model = pickle.load(f)

# Convert the model to bytes
model_bytes = pickle.dumps(model)

# Create a reference to the Firestore document
db = firestore.client()
doc_ref = db.collection(collection_name).document(document_id)

# Update the document with the model bytes
doc_ref.set({'model': firestore.Blob(model_bytes)}, merge=True)

print('Model saved to Firestore!')
